<include file="Public:header" />
<link href="__PUBLIC__/Css/swfupload.css" rev="stylesheet" rel="stylesheet" type="text/css" media="screen">
<div class="rowbox box960">
    <include file="Public:submenu" />
    <include file="Public:admintop" />
    
    <form name="uploadForm" action="/upload/saveupload/" method="post">
        <ul>
            <li>
                <div>
                    <input type="hidden" name="Uploader_Value_1" id="Uploader_Value_1" value=""/>
                    <input type="text" name="Uploader_Show_Value_1" id="Uploader_Show_Value_1" value="Please Click Right Button To Choose File" readonly="readonly"/>
                    <span id="UploaderPlaceholder_1"></span>
                    <!--<input type="button" name="UploaderCancelBtn_1" id="UploaderCancelBtn_1" value="Cancel Upload" onclick="uploads[0].stopUpload();"/>-->
                    <span class="Uploader" style="display:none;" >请选择音乐文件：</span>
                </div>
            </li>
            <li>
                <div id="UploaderProgress_1"></div>
                <div id="UploaderFeedBack_1"></div>
            </li>
            <if condition="count($client) gt 0">
            <li>
                <label>Choose Client</label><select name="client">
                    <option value="">Please Select</option>
                    <volist name="client" id="vo">
                    <option value="{$vo.id}">{$vo.account}</option>
                    </volist>
                </select>
            </li>
            </if>
            
            
            <li>
                <label>Choose Product</label><select name="product">
                    <option value="">Please Select</option>
                    <volist name="product" id="vo">
                    <option value="{$vo.id}">{$vo.name}</option>
                    </volist>
                </select>
            </li>
            
            <li>
                <label>Choose Project</label><select name="projct">
                    <option value=""></option>
                </select>
            </li>
            <li>
                <label>Choose Folder</label><select name="folder">
                    <option value=""></option>
                </select>
            </li>
        </ul>
        
    </form>
</div>
<include file="Public:admin" />

<script type="text/javascript" src="__PUBLIC__/Javascript/swfup/swfupload.js"></script>
<script type="text/javascript" src="__PUBLIC__/Javascript/swfup/swfupload.queue.js"></script>
<script type="text/javascript" src="__PUBLIC__/Javascript/swfup/fileprogress.js"></script>
<script type="text/javascript" src="__PUBLIC__/Javascript/swfup/handlers.js"></script>
<script type="text/javascript">
var uploads = [];
var sid = '{$sid}';
$(function(){
    $(".Uploader").each(function(index){
        uploads.push(createSwfUpload(index + 1));
    });
});

function createSwfUpload(index){
	var upload = new SWFUpload({
		// Backend Settings
		upload_url: "/upload/upload",
		post_params: {"PHPSESSID" : sid},
		// File Upload Settings
		file_size_limit : "50MB",
		file_types : "*.*;",
		file_types_description : "All Files",
		file_upload_limit : "0",
		file_queue_limit : "0",
		// Event Handler Settings (all my handlers are in the Handler.js file)
		file_dialog_start_handler : fileDialogStart,
		file_queued_handler : fileQueued,
		file_queue_error_handler : fileQueueError,
		file_dialog_complete_handler : fileDialogComplete,
		upload_start_handler : uploadStart,
		upload_progress_handler : uploadProgress,
		upload_error_handler : uploadError,
		upload_success_handler : uploadSuccess,
		upload_complete_handler : uploadComplete,
		// Button Settingsimg/fee
		button_image_url : "__PUBLIC__/Images/XPButtonUploadText_61x22.png",
		button_placeholder_id : "UploaderPlaceholder_" + index,
		button_width: 105,
		button_height: 24,
		//button_text : '<span class="redText">上传文件</span>',
		//button_text_style : ".redText {text-align:center;}",
		button_window_mode:"TRANSPARENT",
		button_cursor: SWFUpload.CURSOR.HAND,
		// Flash Settings
		flash_url : "__PUBLIC__/Flash/swfupload.swf",
		custom_settings : {
			progressTarget : "UploaderProgress_" + index,
                        cancelButtonId : "UploaderCancelBtn_" + index,
			callback : function(file,serverData){
				var tmp = eval("(" + serverData + ")");
				if(1 == tmp.respcode){
                                    $("#Uploader_Value_" + index).val(tmp.id);
                                    $("#Uploader_Show_Value_" + index).val(tmp.path);
				}else{
                                   alert('Attachment Upload Failed，Please try it again!');
				}
			}
		},

		// Debug Settings
		debug: false
	});

	return upload;
}


</script>
<include file="Public:footer" />
